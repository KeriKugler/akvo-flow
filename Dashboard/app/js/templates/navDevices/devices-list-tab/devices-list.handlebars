<section class="fullWidth" id="currentDevices">

 <section class="fullWidth " id="devicesList">
        <!-- DEVICES TABLE-->

      {{#view FLOW.CurrentDevicesTabView}}
    <div id="devicesListTable_length" class="dataTables_length">
           <!--  <label>
                Show
                <select size="1" name="deviceListTable_length">
                    <option value="10" selected="selected">10</option> 
                    <option value="20" >20</option> 
                    <option value="50" >50</option> 
                    <option value="100" >100</option> 
                </select>

                &nbsp;entries

            </label> -->

        </div> 
         
         {{#if FLOW.deviceControl.atLeastOneSelected}}
           <nav class="dataTabMenu">
			  <ul>
				  <li><a {{action "showDeleteDevicesDialog" target="this"}}>Disable Devices</a></li>
				  <li><a {{action "showAddToGroupDialog" target="this"}}>Add to Device group</a></li>
				  <li><a {{action "showRemoveFromGroupDialog" target="this"}}>Remove from Device Group</a></li>
			  </ul>
	 	   </nav>
		{{/if}}<a {{action "showManageDeviceGroupsDialog" target="this"}} class="standardBtn btnAboveTable">Manage device groups</a>
        <table class="dataTable" id="surveyDataTable">
            <!-- TABLE HEADER-->
            <thead>
                <tr>
                {{#view FLOW.ColumnView item="select" }}
                    {{view Ember.Checkbox checkedBinding="FLOW.deviceControl.allAreSelected"}}
                {{/view}}
                {{#view FLOW.ColumnView item="IMEI" type="device"}}
                    <a {{action "sort" target="this"}}>IMEI</a>
                {{/view}}
                {{#view FLOW.ColumnView item="macAddress" type="device"}}
                    <a {{action "sort" target="this"}}>MAC Address</a>
                {{/view}}
                {{#view FLOW.ColumnView item="phoneNumber" type="device"}}
                    <a {{action "sort" target="this"}}>Phone number</a>
                {{/view}}
                {{#view FLOW.ColumnView item="deviceIdentifier" type="device"}}
                   <a {{action "sort" target="this"}}>Device ID</a>
                {{/view}}
                {{#view FLOW.ColumnView item="deviceGroup" type="device"}}
                   <a {{action "sort" target="this"}}>Device group</a>
                {{/view}}
                {{#view FLOW.ColumnView item="lastPositionDate" type="device"}}
                   <a {{action "sort" target="this"}}>Last Contact</a>
                {{/view}}
                 <th><a>Action</a></th>
                </tr>
            </thead>
            <!-- TABLE BODY: MAIN CONTENT-->
            <tbody>
                {{#each FLOW.deviceControl}}
                   <tr>
                    <td class="selection"> {{view Ember.Checkbox checkedBinding="isSelected"}}</td>
                    <td class="EMEI">{{EMEI}}</td>
                    <td class="MAC address" >{{macAddress}}</td> 
                    <td class="phoneNumber" >{{phoneNumber}}</td>
                    <td class="deviceId" >{{deviceIdentifier}}</td>
                    <td class="deviceGroup">{{deviceGroupName}}</td>
                    <td class="lastBeacon">{{date1 lastPositionDate}}</td>
                    <td class="action"><a>action</a></td>
                  </tr>
                {{/each}}
            </tbody>
            <!-- TABLE FOOTER-->
            <tfoot>
                <tr>
                    <td colspan="7"><small>This is the footer.</small></td>
                </tr>
            </tfoot>
        </table>
   <!--     {{#if view.showConfirmDeletedialog}}
            <a {{action "doDelete" target="this"}}>Ok</a>
            <a {{action "cancelDelete" target="this"}}>Cancel</a>
        {{/if}}     -->


<!-- add to group dialog-->
    <div {{bindAttr class="view.showAddToGroupDialogBool:display :overlay"}}>
      <div class="blanket"></div>
          <div class="dialogWrap">
        <!-- the dialog contents -->
        <div class="confirmDialog dialog">
          <h2>Add devices to device group</h2>
          <p class="dialogMsg">Choose an existing device group from the list</p>
          <br/>
            {{view Ember.Select 
            contentBinding="FLOW.deviceGroupControl.content" 
            selectionBinding="view.selectedDeviceGroup" 
            optionLabelPath="content.code" 
            optionValuePath="content.keyId" 
            prompt="Select existing device group"}} 
        
          <div class="buttons menuCentre"> 
            <ul>  
               <li><a {{action "doAddToGroup" target="this"}} class="ok smallBtn">OK</a></li>
              <li><a {{action "cancelAddToGroup" target="this"}}} class="cancel">CANCEL</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

<!-- Remove from group dialog-->
    <div {{bindAttr class="view.showRemoveFromGroupDialogBool:display :overlay"}}>
      <div class="blanket"></div>
          <div class="dialogWrap">
        <!-- the dialog contents -->
        <div class="confirmDialog dialog">
          <h2>Remove devices from device group?</h2>
        
          <div class="buttons menuCentre"> 
            <ul>  
               <li><a {{action "doRemoveFromGroup" target="this"}} class="ok smallBtn">OK</a></li>
              <li><a {{action "cancelRemoveFromGroup" target="this"}}} class="cancel">CANCEL</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>


    <!-- manage device groups dialog-->
    <div {{bindAttr class="view.showManageDeviceGroupsDialogBool:display :overlay"}}>
      <div class="blanket"></div>
          <div class="dialogWrap">
        <!-- the dialog contents -->
        <div class="confirmDialog dialog">
          <h2>Manage device groups</h2>
          <p class="dialogMsg">To change the name of an existing group, select it and change the name</p>
          <br/>
            {{view Ember.Select 
            contentBinding="FLOW.deviceGroupControl.content" 
            selectionBinding="view.selectedDeviceGroup" 
            optionLabelPath="content.code" 
            optionValuePath="content.keyId" 
            prompt="Select device group"}} 

          {{view Ember.TextField valueBinding="view.changedDeviceGroupName" size=40}}
          
          <p class="dialogMsg">To create a new device group, enter the name in the box below</p>
           <label for="newDeviceGroupName">New group:</label> {{view Ember.TextField valueBinding="view.newDeviceGroupName" id="newDeviceGroupName" size=40}}
          <div class="buttons menuCentre"> 
            <ul>  
               <li><a {{action "doManageDeviceGroups" target="this"}} class="ok smallBtn">SAVE</a></li>
              <li><a {{action "cancelManageDeviceGroups" target="this"}}} class="cancel">CANCEL</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

        {{/view}}
    </section>
</section>

{{#view FLOW.SavingDeviceGroupView}}
  <div {{bindAttr class="view.showDGSavingDialogBool:display :overlay"}}>
      <div class="blanket"></div>
      <div class="dialogWrap"> 
        <!-- the dialog contents -->
        <div class="confirmDialog dialog">
          <h2>Saving ....</h2>
          <p class="dialogMsg">Please wait</p>
          <div class="buttons menuCentre">
              
          </div>
        </div>
      </div>
  </div>
{{/view}}