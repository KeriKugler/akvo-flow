<project name="exporterApplet" default="signjar" basedir=".">
	
	<property file="build.properties" />
	<property name="src" location="src"/>  	
	<property name="build" location="appletbin"/>
  	<property name="dist"  location="war"/>	
  	
  	<path id="project.classpath">
		<pathelement path="war/WEB-INF/classes" />
		<fileset dir="war/WEB-INF/lib">
			<include name="**/*.jar" />
		</fileset>
		<fileset dir="${sdk.dir}/lib">
			<include name="shared/**/*.jar" />
		</fileset>
		<pathelement path="${gwtlibs.dir}/gwt-user.jar" />
		<pathelement path="${gwtlibs.dir}/gwt-dev.jar" />
  		<fileset dir="war">
  				<include name="poi-3.5-signed.jar" />
  		</fileset>
		<pathelement location="build" />
		<pathelement location="src" />
	</path>


	<target name="compile" depends="makedir">
	 	<javac classpathref="project.classpath" srcdir="${src}" destdir="${build}" debug="true">		 		 	
	 		<include name="com/gallatinsystems/framework/dataexport/**"/>
	 		<include name="com/gallatinsystems/framework/gwt/dto/client/**"/>
	 		<include name="org/waterforpeople/mapping/dataexport/**"/>
	 		<include name="org/waterforpeople/mapping/dataexport/**"/>
	 		<include name="org/waterforpeople/mapping/app/gwt/client/accesspoint/**"/>
	 		<include name="org/waterforpeople/mapping/app/gwt/client/survey/**"/>
	 		<include name="org/waterforpeople/mapping/app/gwt/client/surveyinstance/**"/>
	 		<include name="org/waterforpeople/mapping/app/web/dto/**"/>	 		
	 		<include name="com/gallatinsystems/framework/rest/**"/>	 	
	 		
		</javac>
	 		
	</target>

	<target name="package" depends="compile">	
	 	<jar destfile="${dist}/exporterapplet.jar" basedir="${build}"/>
	</target>

	<target name="signjar" depends="package">		
		<signjar jar="${dist}/exporterapplet.jar" alias="${keystore.alias}" keystore="${keystore.dir}" storepass="${keystore.password}" verbose="true"/>		
	</target>
		
	
	<target name="clean">
		<delete dir="${build}"/>		
		<delete file="${dist}/exporterapplet.jar"/>
	</target>
	
	<target name="makedir">
		<mkdir dir="${build}"/>
	</target>
	

</project>